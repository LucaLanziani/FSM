/*! FSM v1.0.3 by Anthony Blackshaw <ant@getme.co.uk> (https://github.com/anthonyjb) */
(function(){var FSM;FSM={},FSM.Machine=function(){function Machine(context){this.context=context,this._stateTransitions={},this._stateTransitionsAny={},this._defaultTransition=null,this._initialState=null,this._currentState=null}return Machine.prototype.addTransition=function(action,state,nextState,onEnter,onState){return nextState||(nextState=state),this._stateTransitions[[action,state]]=[nextState,onEnter,onState]},Machine.prototype.addTransitions=function(actions,state,nextState,onEnter,onState){var action,_i,_len,_results;for(nextState||(nextState=state),_results=[],_i=0,_len=actions.length;_i<_len;_i++)action=actions[_i],_results.push(this.addTransition(action,state,nextState,onEnter,onState));return _results},Machine.prototype.addTransitionAny=function(state,nextState,onEnter,onState){return nextState||(nextState=state),this._stateTransitionsAny[state]=[nextState,onEnter,onState]},Machine.prototype.setDefaultTransition=function(state,onEnter,onState){return this._defaultTransition=[state,onEnter,onState]},Machine.prototype.getTransition=function(action,state){return this._stateTransitions[[action,state]]?this._stateTransitions[[action,state]]:this._stateTransitionsAny[state]?this._stateTransitionsAny[state]:this._defaultTransition?this._defaultTransition:void 0},Machine.prototype.getCurrentState=function(){return this._currentState},Machine.prototype.setInitialState=function(state){if(this._initialState=state,!this._currentState)return this.reset()},Machine.prototype.reset=function(){return this._currentState=this._initialState},Machine.prototype.process=function(action){var result;if(result=this.getTransition(action,this._currentState))return(!result[1]||!1!==result[1].call(this.context||(this.context=this),action))&&(this._currentState=result[0],result[2]?result[2].call(this.context||(this.context=this),action):void 0)},Machine}(),"undefined"!=typeof window&&(window.FSM=FSM),"undefined"!=typeof module&&module.exports&&(module.exports=FSM)}).call(this);